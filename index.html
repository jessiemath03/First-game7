<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jessie Math - å…¬æ–¤èˆ‡å…¬å…‹å†’éšª</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;700&display=swap');
        body { font-family: 'Noto+Sans+TC', sans-serif; background-color: #f0f9ff; overflow-x: hidden; }
        .yellow-circle { width: 80px; height: 80px; background: #FFD700; border-radius: 50%; display: flex; align-items: center; justify-content: center; overflow: hidden; }
        .glass-morphism { background: rgba(255, 255, 255, 0.9); backdrop-filter: blur(10px); border-radius: 20px; border: 1px solid rgba(255, 255, 255, 0.3); }
        .pause-overlay { background: rgba(0,0,0,0.7); display: none; }
        .combo-text { animation: bounce 0.5s infinite alternate; }
        @keyframes bounce { from { transform: scale(1); } to { transform: scale(1.2); } }
        .hidden { display: none; }
        .option-btn:active { transform: scale(0.95); }
    </style>
</head>
<body class="p-0 m-0">

    <header class="flex justify-between items-center p-4 bg-white shadow-md sticky top-0 z-50">
        <div class="flex items-center gap-3">
            <div class="yellow-circle">
                <img src="JESSIEMATH-Q.png" alt="Jessie Math" class="w-full h-full object-contain">
            </div>
            <span class="text-xl font-bold text-blue-600">Jessie Math</span>
        </div>
        <div class="flex gap-2 text-sm sm:text-base">
            <a href="https://jessiemath0703-chu.github.io/website2/" class="flex flex-col items-center p-2"><i class="fas fa-home"></i><span>é¦–é </span></a>
            <a href="https://jessiemath0703-chu.github.io/website2/" class="flex flex-col items-center p-2"><i class="fas fa-gamepad"></i><span>éŠæˆ²å¤§å»³</span></a>
            <a href="https://jessiemath0703-chu.github.io/Game-Lobby/#g3-u7" class="flex flex-col items-center p-2 bg-yellow-400 rounded-lg text-white"><i class="fas fa-arrow-left"></i><span>ä¸‰å¹´ç´šå…¬æ–¤èˆ‡å…¬å…‹</span></a>
        </div>
    </header>

    <section id="start-screen" class="max-w-md mx-auto mt-10 p-6 glass-morphism text-center">
        <h1 class="text-2xl font-bold mb-4 text-blue-700">âš–ï¸ é‡é‡ç‹åœ‹å¤§å†’éšª</h1>
        <div class="mb-4 text-left text-gray-600 text-sm">
            <p><strong>éŠæˆ²èªªæ˜ï¼š</strong></p>
            <ul class="list-disc ml-5">
                <li>æ¯é—œ 60 ç§’ï¼Œéš¨æ©Ÿå‡ºé¡Œã€‚</li>
                <li>ç­”å°åŠ  5 ç§’ä¸¦å¾—åˆ†ï¼Œç­”éŒ¯æ‰£ 5 ç§’ã€‚</li>
                <li>é€£çºŒç­”å°è§¸ç™¼ **Combo å€ç‡åŠ æˆ**ï¼</li>
            </ul>
        </div>
        <input type="text" id="player-name" placeholder="è«‹è¼¸å…¥ä½ çš„è‹±é›„å¤§å" class="w-full p-3 border-2 border-blue-300 rounded-xl mb-4 text-center text-lg focus:ring-2 focus:ring-blue-400 outline-none">
        <button onclick="startGame()" class="w-full bg-blue-500 text-white py-3 rounded-xl font-bold text-lg hover:bg-blue-600 transition shadow-lg">é€²å…¥é—œå¡é¸æ“‡</button>
    </section>

    <section id="level-select" class="max-w-4xl mx-auto mt-10 p-4 hidden">
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
            <div class="lg:col-span-2">
                <h2 class="text-2xl font-bold mb-6 text-blue-800"><i class="fas fa-map-marked-alt mr-2"></i>é¸æ“‡æŒ‘æˆ°é—œå¡</h2>
                <div class="grid grid-cols-1 sm:grid-cols-2 gap-4 mb-8">
                    <button onclick="pickLevel(1)" class="p-5 bg-white rounded-2xl shadow hover:shadow-lg border-b-4 border-blue-500 text-left transition transform hover:-translate-y-1">
                        <span class="text-blue-500 font-bold block">7-1 èªè­˜å…¬æ–¤</span> 1kg çš„å¤§å°äº‹ (é¡Œåº«è±å¯Œç‰ˆ)
                    </button>
                    <button onclick="pickLevel(2)" class="p-5 bg-white rounded-2xl shadow hover:shadow-lg border-b-4 border-green-500 text-left transition transform hover:-translate-y-1">
                        <span class="text-green-500 font-bold block">7-2 èªè­˜å…¬å…‹</span> 1g çš„ç´°å¾®é‡é‡
                    </button>
                    <button onclick="pickLevel(3)" class="p-5 bg-white rounded-2xl shadow hover:shadow-lg border-b-4 border-yellow-500 text-left transition transform hover:-translate-y-1">
                        <span class="text-yellow-600 font-bold block">7-3 å¹¾å…¬æ–¤å¹¾å…¬å…‹</span> è¤‡åˆå–®ä½æŒ‘æˆ°
                    </button>
                    <button onclick="pickLevel(4)" class="p-5 bg-white rounded-2xl shadow hover:shadow-lg border-b-4 border-orange-500 text-left transition transform hover:-translate-y-1">
                        <span class="text-orange-500 font-bold block">7-4 æ›ç®—èˆ‡æ¯”è¼ƒ</span> èª°å¤§èª°å°ç®—ç®—çœ‹
                    </button>
                    <button onclick="pickLevel(5)" class="p-5 bg-white rounded-2xl shadow hover:shadow-lg border-b-4 border-red-500 text-left transition transform hover:-translate-y-1">
                        <span class="text-red-500 font-bold block">7-5 ä¼°æ¸¬èˆ‡è¨ˆç®—</span> ç”Ÿæ´»æ‡‰ç”¨çš„æ™ºæ…§
                    </button>
                </div>
                <div class="bg-blue-50 p-4 rounded-xl border border-blue-200">
                    <h3 class="font-bold mb-2 text-blue-700">é¸æ“‡é€Ÿåº¦ (é›£åº¦)</h3>
                    <select id="difficulty" class="w-full p-3 border-2 border-white rounded-lg outline-none">
                        <option value="1">æ™®é€š (1.0x)</option>
                        <option value="1.5">å›°é›£ (1.5x)</option>
                        <option value="2">å¤§å¸« (2.0x)</option>
                    </select>
                </div>
            </div>
            <div class="lg:col-span-1">
                <div class="bg-white rounded-2xl shadow-lg p-6 border-t-4 border-yellow-400">
                    <h3 class="text-xl font-bold text-center mb-4 text-gray-700"><i class="fas fa-crown text-yellow-500 mr-2"></i>è‹±é›„æ’è¡Œæ¦œ</h3>
                    <div id="rank-container" class="space-y-3"></div>
                </div>
            </div>
        </div>
    </section>

    <section id="game-play" class="max-w-2xl mx-auto mt-5 p-4 hidden relative">
        <div class="flex justify-between mb-4 font-bold text-lg items-center">
            <div class="bg-red-100 text-red-600 px-4 py-1 rounded-full border border-red-200">â±ï¸ <span id="timer">60</span>s</div>
            <div class="text-blue-700 text-xl font-bold">å¾—åˆ†: <span id="score">0</span></div>
            <div id="combo-ui" class="bg-orange-100 text-orange-600 px-4 py-1 rounded-full border border-orange-200 combo-text hidden">Combo x<span id="combo-count">0</span></div>
        </div>

        <div id="question-card" class="glass-morphism p-6 text-center min-h-[400px] flex flex-col justify-center items-center shadow-2xl relative">
            <div id="illustration" class="mb-4 text-8xl">âš–ï¸</div>
            <h3 id="question-text" class="text-2xl font-bold mb-8 text-gray-800 leading-relaxed">è¼‰å…¥é¡Œç›®ä¸­...</h3>
            <div id="options" class="grid grid-cols-1 sm:grid-cols-2 gap-4 w-full"></div>
            
            <div id="pause-modal" class="pause-overlay absolute inset-0 z-20 flex items-center justify-center rounded-2xl">
                <div class="text-white text-center">
                    <h2 class="text-4xl font-bold mb-6">éŠæˆ²æš«åœ</h2>
                    <button onclick="togglePause()" class="bg-green-500 hover:bg-green-600 px-10 py-4 rounded-full text-2xl shadow-lg transition transform hover:scale-105">é»æ“Šç¹¼çºŒ</button>
                </div>
            </div>
        </div>

        <div class="flex justify-around mt-8">
            <button onclick="resetGame()" class="bg-gray-500 text-white px-5 py-2 rounded-xl hover:bg-gray-600 transition"><i class="fas fa-redo mr-1"></i>é‡æ–°</button>
            <button onclick="togglePause()" id="btn-pause" class="bg-yellow-500 text-white px-5 py-2 rounded-xl hover:bg-yellow-600 transition"><i class="fas fa-pause mr-1"></i>æš«åœ</button>
            <button onclick="backToMenu()" class="bg-red-500 text-white px-5 py-2 rounded-xl hover:bg-red-600 transition"><i class="fas fa-sign-out-alt mr-1"></i>å›é¸å–®</button>
        </div>
    </header>

    <section id="result-screen" class="max-w-md mx-auto mt-10 p-8 glass-morphism text-center hidden">
        <h2 class="text-3xl font-bold mb-2 text-blue-800">æŒ‘æˆ°çµæŸï¼</h2>
        <div id="stars" class="text-5xl text-yellow-400 mb-4 animate-bounce">â­â­â­</div>
        <p class="text-2xl mb-6 font-bold text-gray-700">å¾—åˆ†ï¼š<span id="final-score" class="text-blue-600 text-4xl">0</span></p>
        <button onclick="backToMenu()" class="w-full bg-blue-500 text-white py-4 rounded-xl font-bold text-xl hover:bg-blue-600 transition shadow-lg">è¿”å›é—œå¡</button>
    </section>

    <script>
        let gameState = {
            name: "", level: 1, score: 0, time: 60, combo: 0,
            isPaused: false, timerInterval: null, currentAns: null, difficulty: 1
        };

        const questionGenerator = {
            level1: () => {
                const kgPool = [
                    // åŸºç¤å®šç¾©
                    {q: "ã€å…¬æ–¤ã€çš„è‹±æ–‡ç¸®å¯«æ˜¯ä»€éº¼ï¼Ÿ", a: "kg", o: ["g", "kg", "m", "km"], i: "âš–ï¸"},
                    {q: "1000å…¬å…‹åˆèµ·ä¾†æ˜¯å¤šå°‘ï¼Ÿ", a: "1å…¬æ–¤", o: ["1å…¬æ–¤", "10å…¬å…‹", "100å…¬æ–¤", "1000å…¬æ–¤"], i: "ğŸ“¦"},
                    {q: "ç£…ç§¤ä¸Šçš„åˆ»åº¦å¾ 0 åˆ° 1ï¼Œä¸­é–“é€šå¸¸ä»£è¡¨å¹¾å…¬æ–¤ï¼Ÿ", a: "1å…¬æ–¤", o: ["1å…¬æ–¤", "10å…¬æ–¤", "100å…¬æ–¤"], i: "â²ï¸"},
                    // ç”Ÿæ´»æ‡‰ç”¨
                    {q: "ä¸‹åˆ—å“ªä¸€å€‹ç‰©å“ã€ä¸é©åˆã€ç”¨å…¬æ–¤åšå–®ä½ï¼Ÿ", a: "ä¸€æšéƒµç¥¨", o: ["ä¸€ç®±è˜‹æœ", "å°ç‹—", "çˆ¸çˆ¸çš„é«”é‡", "ä¸€æšéƒµç¥¨"], i: "ğŸš«"},
                    {q: "è¶…å¸‚è³£çš„ç‰¹å¤§ç“¶é®®ä¹³å¤§ç´„é‡ï¼Ÿ", a: "2å…¬æ–¤", o: ["2å…¬æ–¤", "200å…¬æ–¤", "2å…¬å…‹"], i: "ğŸ¥›"},
                    {q: "ä¸€ç®±æ©˜å­é‡ 5 å…¬æ–¤ï¼Œ2 ç®±å…±é‡å¹¾å…¬æ–¤ï¼Ÿ", a: "10å…¬æ–¤", o: ["7å…¬æ–¤", "10å…¬æ–¤", "50å…¬æ–¤"], i: "ğŸŠ"},
                    {q: "å¤§ç´„å¹¾æœ¬åšåšçš„å­—å…¸åˆèµ·ä¾†é‡ 1 å…¬æ–¤ï¼Ÿ", a: "1æœ¬", o: ["1æœ¬", "100æœ¬", "1000æœ¬"], i: "ğŸ“–"},
                    // ç ç¢¼è¨ˆç®—
                    {q: "å¤©å¹³å·¦é‚Šæ”¾ 1å…¬æ–¤ï¼Œå³é‚Šè¦æ”¾å¹¾å€‹ 500g æ‰èƒ½å¹³è¡¡ï¼Ÿ", a: "2å€‹", o: ["1å€‹", "2å€‹", "5å€‹", "10å€‹"], i: "âš–ï¸"},
                    {q: "5å€‹ 200å…¬å…‹çš„ç ç¢¼ï¼Œåˆèµ·ä¾†æ˜¯å¹¾å…¬æ–¤ï¼Ÿ", a: "1å…¬æ–¤", o: ["1å…¬æ–¤", "1000å…¬æ–¤", "5å…¬æ–¤"], i: "âš–ï¸"},
                    {q: "4å€‹ 250å…¬å…‹çš„å¥¶æ²¹ï¼Œåˆèµ·ä¾†å…±é‡ï¼Ÿ", a: "1kg", o: ["1kg", "250g", "4kg"], i: "ğŸ§ˆ"},
                    // é™·é˜±é¡Œ
                    {q: "1å…¬æ–¤çš„æ£‰èŠ±å’Œ1000å…¬å…‹çš„éµï¼Œå“ªä¸€å€‹æ¯”è¼ƒé‡ï¼Ÿ", a: "ä¸€æ¨£é‡", o: ["æ£‰èŠ±", "éµ", "ä¸€æ¨£é‡"], i: "â˜ï¸"}
                ];
                // éš¨æ©Ÿæ•¸å€¼ç”Ÿæˆé¡Œç›®
                if (Math.random() > 0.7) {
                    const randomKg = Math.floor(Math.random() * 8) + 2;
                    return {
                        q: `${randomKg} å…¬æ–¤ç­‰æ–¼å¹¾å…¬å…‹ï¼Ÿ`,
                        a: `${randomKg * 1000}å…¬å…‹`,
                        o: [`${randomKg * 1000}å…¬å…‹`, `${randomKg * 100}å…¬å…‹`, `${randomKg}0å…¬å…‹`],
                        i: "ğŸ“¦"
                    };
                }
                return kgPool[Math.floor(Math.random() * kgPool.length)];
            },
            level2: () => {
                const pool = [
                    {q: "1å…¬å…‹åœ¨è‹±æ–‡ç¸®å¯«ä¸­æ˜¯ï¼Ÿ", a: "g", o: ["kg", "g", "m", "cm"], i: "ğŸ“"},
                    {q: "å“ªä¸€å€‹ç‰©å“æœ€æ¥è¿‘ 1å…¬å…‹ï¼Ÿ", a: "ä¸€å€‹è¿´ç´‹é‡", o: ["ä¸€ç“¶æ°´", "ä¸€è¼›å¤§è»Š", "ä¸€å€‹è¿´ç´‹é‡"], i: "ğŸ“"},
                    {q: "1000å€‹ 1å…¬å…‹åˆèµ·ä¾†æ˜¯å¹¾å…¬æ–¤ï¼Ÿ", a: "1å…¬æ–¤", o: ["10å…¬æ–¤", "100å…¬æ–¤", "1å…¬æ–¤"], i: "ğŸ“¦"},
                    {q: "ä¸€åŒ…ç ‚ç³– 500å…¬å…‹ï¼Œå…©åŒ…åˆèµ·ä¾†æ˜¯ï¼Ÿ", a: "1000g", o: ["100g", "500g", "1000g"], i: "ğŸ§‚"},
                    {q: "ã€gã€é€™å€‹å–®ä½é©åˆç¨±å“ªç¨®ç‰©å“ï¼Ÿ", a: "è‰è“", o: ["å¤§è±¡", "è‰è“", "å¤§å·´å£«"], i: "ğŸ“"}
                ];
                return pool[Math.floor(Math.random() * pool.length)];
            },
            level3: () => {
                const kg = Math.floor(Math.random() * 5) + 1;
                const g = (Math.floor(Math.random() * 9) + 1) * 100;
                const altG = g < 500 ? g + 10 : g - 10;
                return {
                    q: `${kg}å…¬æ–¤ ${g}å…¬å…‹ ç­‰æ–¼å¤šå°‘å…¬å…‹ï¼Ÿ`,
                    a: `${kg * 1000 + g}g`,
                    o: [`${kg * 1000 + g}g`, `${kg * 100 + g}g`, `${kg * 1000 + altG}g`],
                    i: "ğŸ§º"
                };
            },
            level4: () => {
                const type = Math.random();
                if (type > 0.6) {
                    const val = Math.floor(Math.random() * 3) + 2;
                    return {
                        q: `æ¯”è¼ƒå¤§å°ï¼š${val}kg ã€‡ ${val * 1000 - 50}g`,
                        a: ">", o: [">", "<", "="], i: "âš–ï¸"
                    };
                } else if (type > 0.3) {
                    return {
                        q: `æ¯”è¼ƒå¤§å°ï¼š1500g ã€‡ 1kg 500g`,
                        a: "=", o: [">", "<", "="], i: "âš–ï¸"
                    };
                } else {
                    return {
                        q: `æ¯”è¼ƒå¤§å°ï¼š300g ã€‡ 3kg`,
                        a: "<", o: [">", "<", "="], i: "âš–ï¸"
                    };
                }
            },
            level5: () => {
                const pool = [
                    {q: "ä¸€ç›’é›è›‹é€£ç›’å­é‡ 600gï¼Œç›’å­ 50gï¼Œé›è›‹å¤šé‡ï¼Ÿ", a: "550g", o: ["650g", "550g", "500g"], i: "ğŸ¥š"},
                    {q: "åª½åª½è²·äº† 2kg éºµç²‰ï¼Œç”¨äº† 800gï¼Œå‰©ä¸‹ï¼Ÿ", a: "1200g", o: ["1200g", "1000g", "1800g"], i: "ğŸ¥–"},
                    {q: "ä¸€ç“¶é®®å¥¶ç´„é‡ï¼Ÿ", a: "1å…¬æ–¤", o: ["1å…¬æ–¤", "1å…¬å…‹", "100å…¬æ–¤"], i: "ğŸ¥›"},
                    {q: "è€å¸«çš„é«”é‡å¤§ç´„æ˜¯ï¼Ÿ", a: "60å…¬æ–¤", o: ["60å…¬æ–¤", "60å…¬å…‹", "600å…¬æ–¤"], i: "ğŸ‘¨â€ğŸ«"},
                    {q: "å°è²“é‡ 1500gï¼Œå°ç‹—é‡ 3kgï¼Œèª°æ¯”è¼ƒé‡ï¼Ÿ", a: "å°ç‹—", o: ["å°è²“", "å°ç‹—", "ä¸€æ¨£é‡"], i: "ğŸˆ"}
                ];
                return pool[Math.floor(Math.random() * pool.length)];
            }
        };

        function startGame() {
            const name = document.getElementById('player-name').value.trim();
            if (!name) return alert("è«‹è¼¸å…¥è‹±é›„å¤§åï¼");
            gameState.name = name;
            showScreen('level-select');
            updateRankDisplay();
        }

        function pickLevel(lv) {
            gameState.isPaused = false;
            document.getElementById('pause-modal').style.display = 'none';
            document.getElementById('btn-pause').innerHTML = '<i class="fas fa-pause mr-1"></i>æš«åœ';
            
            gameState.level = lv;
            gameState.difficulty = parseFloat(document.getElementById('difficulty').value);
            gameState.score = 0;
            gameState.time = 60;
            gameState.combo = 0;
            
            document.getElementById('score').innerText = "0";
            document.getElementById('timer').innerText = "60";
            document.getElementById('combo-ui').classList.add('hidden');
            
            showScreen('game-play');
            nextQuestion();
            startTimer();
        }

        function startTimer() {
            clearInterval(gameState.timerInterval);
            gameState.timerInterval = setInterval(() => {
                if (!gameState.isPaused) {
                    gameState.time -= (1 * gameState.difficulty);
                    const displayTime = Math.max(0, Math.ceil(gameState.time));
                    document.getElementById('timer').innerText = displayTime;
                    if (gameState.time <= 0) endGame();
                }
            }, 1000);
        }

        function nextQuestion() {
            const qObj = questionGenerator[`level${gameState.level}`]();
            document.getElementById('question-text').innerText = qObj.q;
            document.getElementById('illustration').innerText = qObj.i || "âš–ï¸";
            gameState.currentAns = qObj.a;

            const optionsDiv = document.getElementById('options');
            optionsDiv.innerHTML = '';
            
            const shuffled = [...qObj.o].sort(() => Math.random() - 0.5);
            shuffled.forEach(opt => {
                const btn = document.createElement('button');
                btn.className = "option-btn p-4 bg-white border-2 border-blue-100 rounded-xl hover:bg-blue-500 hover:text-white font-bold transition text-lg shadow-sm";
                btn.innerText = opt;
                btn.onclick = () => checkAnswer(opt);
                optionsDiv.appendChild(btn);
            });
        }

        function checkAnswer(ans) {
            if (gameState.isPaused) return;
            if (ans === gameState.currentAns) {
                let points = 10 + (gameState.combo * 2);
                gameState.score += points;
                gameState.time += 5;
                gameState.combo++;
                
                if (gameState.combo > 1) {
                    const comboUI = document.getElementById('combo-ui');
                    comboUI.classList.remove('hidden');
                    document.getElementById('combo-count').innerText = gameState.combo;
                }
            } else {
                gameState.time -= 5;
                gameState.combo = 0;
                document.getElementById('combo-ui').classList.add('hidden');
                alert(`å–”å–”ï¼ç­”éŒ¯äº†ï¼Œæ­£ç¢ºç­”æ¡ˆæ˜¯ï¼š${gameState.currentAns}`);
            }
            document.getElementById('score').innerText = gameState.score;
            nextQuestion();
        }

        function togglePause() {
            gameState.isPaused = !gameState.isPaused;
            document.getElementById('pause-modal').style.display = gameState.isPaused ? 'flex' : 'none';
            document.getElementById('btn-pause').innerHTML = gameState.isPaused ? '<i class="fas fa-play mr-1"></i>ç¹¼çºŒ' : '<i class="fas fa-pause mr-1"></i>æš«åœ';
        }

        function resetGame() {
            if(confirm("ç¢ºå®šè¦é‡ä¾†å—ï¼Ÿåˆ†æ•¸æœƒæ­¸é›¶å–”ï¼")) {
                pickLevel(gameState.level);
            }
        }

        function backToMenu() {
            clearInterval(gameState.timerInterval);
            showScreen('level-select');
            updateRankDisplay();
        }

        function endGame() {
            clearInterval(gameState.timerInterval);
            showScreen('result-screen');
            document.getElementById('final-score').innerText = gameState.score;
            
            let s = "â­";
            if (gameState.score >= 80) s = "â­â­";
            if (gameState.score >= 150) s = "â­â­â­";
            document.getElementById('stars').innerText = s;
            
            saveScore(gameState.name, gameState.score);
        }

        function saveScore(name, score) {
            let r = JSON.parse(localStorage.getItem('jessiemath_rank') || '[]');
            r.push({name, score, date: new Date().toLocaleDateString()});
            r.sort((a,b) => b.score - a.score);
            localStorage.setItem('jessiemath_rank', JSON.stringify(r.slice(0, 5)));
        }

        function updateRankDisplay() {
            const container = document.getElementById('rank-container');
            let r = JSON.parse(localStorage.getItem('jessiemath_rank') || '[]');
            if (r.length === 0) {
                container.innerHTML = '<p class="text-center text-gray-400 text-sm py-4">å°šç„¡æŒ‘æˆ°ç´€éŒ„</p>';
                return;
            }
            container.innerHTML = r.map((entry, i) => `
                <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg border border-gray-100">
                    <div class="flex items-center gap-3">
                        <span class="w-6 h-6 flex items-center justify-center rounded-full ${i===0?'bg-yellow-400 text-white font-bold':'bg-gray-200'} text-xs">${i+1}</span>
                        <span class="font-bold text-gray-700">${entry.name}</span>
                    </div>
                    <span class="font-bold text-blue-600">${entry.score}</span>
                </div>
            `).join('');
        }

        function showScreen(id) {
            ['start-screen', 'level-select', 'game-play', 'result-screen'].forEach(s => {
                document.getElementById(s).classList.add('hidden');
            });
            document.getElementById(id).classList.remove('hidden');
        }
    </script>
</body>
</html>